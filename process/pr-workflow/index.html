
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A discrete-event simulator for LLM inference serving systems">
      
      
      
      
        <link rel="prev" href="../../standards/experiments/">
      
      
        <link rel="next" href="../design/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>PR Workflow - BLIS — Blackbox Inference Simulator</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pr-development-workflow" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BLIS — Blackbox Inference Simulator" class="md-header__button md-logo" aria-label="BLIS — Blackbox Inference Simulator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BLIS — Blackbox Inference Simulator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PR Workflow
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/inference-sim/inference-sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    inference-sim/inference-sim
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BLIS — Blackbox Inference Simulator" class="md-nav__button md-logo" aria-label="BLIS — Blackbox Inference Simulator" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    BLIS — Blackbox Inference Simulator
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/inference-sim/inference-sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    inference-sim/inference-sim
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Design
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cluster Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/core-engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concepts & Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/roofline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roofline Estimation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/rules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Antipattern Rules (R1-R20)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/invariants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    System Invariants (INV-1-8)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/principles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engineering Principles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../standards/experiments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Experiment Standards
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Process
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Process
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    PR Workflow
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    PR Workflow
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#current-template-versions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Current Template Versions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-reference-simplified-invocations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Reference: Simplified Invocations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step Process
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-isolated-worktree-using-using-git-worktrees-skill" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Create Isolated Worktree Using using-git-worktrees Skill
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-implementation-plan-using-writing-plans-skill" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Create Implementation Plan Using writing-plans Skill
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-25-multi-perspective-plan-review-rounds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.5: Multi-Perspective Plan Review (Rounds)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2.5: Multi-Perspective Plan Review (Rounds)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perspective-1-substance-design-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 1: Substance &amp; Design Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-2-cross-document-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 2: Cross-Document Consistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-3-architecture-boundary-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 3: Architecture Boundary Verification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-4-codebase-readiness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 4: Codebase Readiness
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-5-plan-structural-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 5: Plan Structural Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-6-des-expert-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 6: DES Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-7-vllmsglang-expert-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 7: vLLM/SGLang Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-8-distributed-inference-platform-expert-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 8: Distributed Inference Platform Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-9-performance-scalability-analyst" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 9: Performance &amp; Scalability Analyst
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-10-security-robustness-reviewer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 10: Security &amp; Robustness Reviewer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-human-review-of-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Human Review of Plan
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-execute-plan-using-executing-plans-skill" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Execute Plan Using executing-plans Skill
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-45-multi-perspective-code-review-rounds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.5: Multi-Perspective Code Review (Rounds)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 4.5: Multi-Perspective Code Review (Rounds)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perspective-1-substance-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 1: Substance &amp; Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-2-code-quality-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 2: Code Quality + Error Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-3-test-behavioral-quality" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 3: Test Behavioral Quality
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-4-getting-started-experience" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 4: Getting-Started Experience
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-5-automated-reviewer-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 5: Automated Reviewer Simulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-6-des-expert-review_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 6: DES Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-7-vllmsglang-expert-review_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 7: vLLM/SGLang Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-8-distributed-inference-platform-expert-review_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 8: Distributed Inference Platform Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-9-performance-scalability-analyst_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 9: Performance &amp; Scalability Analyst
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-10-security-robustness-reviewer_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 10: Security &amp; Robustness Reviewer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#during-any-perspective-filing-pre-existing-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        During Any Perspective: Filing Pre-Existing Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convergence-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        Convergence Protocol
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-convergence-enforced-verification-gate" class="md-nav__link">
    <span class="md-ellipsis">
      
        After Convergence: Enforced Verification Gate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-475-pre-commit-self-audit-no-agent-deliberate-thinking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.75: Pre-Commit Self-Audit (No Agent — Deliberate Thinking)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-commit-push-and-create-pr-using-commit-commandscommit-push-pr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Commit, Push, and Create PR Using commit-commands:commit-push-pr
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-variants" class="md-nav__link">
    <span class="md-ellipsis">
      
        Workflow Variants
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Workflow Variants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-subagent-driven-development-in-session" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option A: Subagent-Driven Development (In-Session)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pr-size-tiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        PR Size Tiers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skill-reference-quick-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        Skill Reference Quick Guide
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-a-macro-plan-pr-workflow-same-session-with-worktrees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example A: Macro Plan PR Workflow (Same-Session with .worktrees/)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-b-issuedesign-doc-pr-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example B: Issue/Design-Doc PR Workflow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-for-success" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tips for Success
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tips for Success">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#headless-mode-for-reviews-context-overflow-workaround" class="md-nav__link">
    <span class="md-ellipsis">
      
        Headless Mode for Reviews (Context Overflow Workaround)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-strategy-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Review Strategy Tips
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues and Solutions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-plan-too-generic-agents-ask-clarifying-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Plan too generic, agents ask clarifying questions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-tasks-miss-behavioral-contracts-during-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Tasks miss behavioral contracts during execution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-lint-fails-at-the-end-with-many-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Lint fails at the end with many issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-dead-code-introduced-unused-functions-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Dead code introduced (unused functions, fields)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-review-finds-many-critical-issues-overwhelming-to-fix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Review finds many critical issues, overwhelming to fix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-uncertain-if-review-findings-are-valid" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Uncertain if review findings are valid
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-workflow-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix: Workflow Evolution
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Documents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../macro-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Macro Planning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hypothesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypothesis Experiments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../convergence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Convergence Protocol
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../templates/design-guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../templates/macro-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Macro Plan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../templates/micro-plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Micro Plan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../templates/hypothesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypothesis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extension-recipes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extension Recipes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#current-template-versions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Current Template Versions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-reference-simplified-invocations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Quick Reference: Simplified Invocations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step-by-Step Process
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step-by-Step Process">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-isolated-worktree-using-using-git-worktrees-skill" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Create Isolated Worktree Using using-git-worktrees Skill
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-implementation-plan-using-writing-plans-skill" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2: Create Implementation Plan Using writing-plans Skill
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-25-multi-perspective-plan-review-rounds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 2.5: Multi-Perspective Plan Review (Rounds)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 2.5: Multi-Perspective Plan Review (Rounds)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perspective-1-substance-design-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 1: Substance &amp; Design Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-2-cross-document-consistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 2: Cross-Document Consistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-3-architecture-boundary-verification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 3: Architecture Boundary Verification
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-4-codebase-readiness" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 4: Codebase Readiness
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-5-plan-structural-validation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 5: Plan Structural Validation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-6-des-expert-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 6: DES Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-7-vllmsglang-expert-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 7: vLLM/SGLang Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-8-distributed-inference-platform-expert-review" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 8: Distributed Inference Platform Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-9-performance-scalability-analyst" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 9: Performance &amp; Scalability Analyst
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-10-security-robustness-reviewer" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 10: Security &amp; Robustness Reviewer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-human-review-of-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Human Review of Plan
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-execute-plan-using-executing-plans-skill" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Execute Plan Using executing-plans Skill
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-45-multi-perspective-code-review-rounds" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.5: Multi-Perspective Code Review (Rounds)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 4.5: Multi-Perspective Code Review (Rounds)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#perspective-1-substance-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 1: Substance &amp; Design
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-2-code-quality-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 2: Code Quality + Error Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-3-test-behavioral-quality" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 3: Test Behavioral Quality
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-4-getting-started-experience" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 4: Getting-Started Experience
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-5-automated-reviewer-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 5: Automated Reviewer Simulation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-6-des-expert-review_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 6: DES Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-7-vllmsglang-expert-review_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 7: vLLM/SGLang Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-8-distributed-inference-platform-expert-review_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 8: Distributed Inference Platform Expert Review
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-9-performance-scalability-analyst_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 9: Performance &amp; Scalability Analyst
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#perspective-10-security-robustness-reviewer_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Perspective 10: Security &amp; Robustness Reviewer
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#during-any-perspective-filing-pre-existing-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        During Any Perspective: Filing Pre-Existing Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#convergence-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        Convergence Protocol
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#after-convergence-enforced-verification-gate" class="md-nav__link">
    <span class="md-ellipsis">
      
        After Convergence: Enforced Verification Gate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-475-pre-commit-self-audit-no-agent-deliberate-thinking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4.75: Pre-Commit Self-Audit (No Agent — Deliberate Thinking)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-commit-push-and-create-pr-using-commit-commandscommit-push-pr" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Commit, Push, and Create PR Using commit-commands:commit-push-pr
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workflow-variants" class="md-nav__link">
    <span class="md-ellipsis">
      
        Workflow Variants
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Workflow Variants">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-subagent-driven-development-in-session" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option A: Subagent-Driven Development (In-Session)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pr-size-tiers" class="md-nav__link">
    <span class="md-ellipsis">
      
        PR Size Tiers
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skill-reference-quick-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        Skill Reference Quick Guide
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-a-macro-plan-pr-workflow-same-session-with-worktrees" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example A: Macro Plan PR Workflow (Same-Session with .worktrees/)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-b-issuedesign-doc-pr-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example B: Issue/Design-Doc PR Workflow
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips-for-success" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tips for Success
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Tips for Success">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#headless-mode-for-reviews-context-overflow-workaround" class="md-nav__link">
    <span class="md-ellipsis">
      
        Headless Mode for Reviews (Context Overflow Workaround)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#review-strategy-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Review Strategy Tips
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-issues-and-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues and Solutions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues and Solutions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#issue-plan-too-generic-agents-ask-clarifying-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Plan too generic, agents ask clarifying questions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-tasks-miss-behavioral-contracts-during-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Tasks miss behavioral contracts during execution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-lint-fails-at-the-end-with-many-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Lint fails at the end with many issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-dead-code-introduced-unused-functions-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Dead code introduced (unused functions, fields)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-review-finds-many-critical-issues-overwhelming-to-fix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Review finds many critical issues, overwhelming to fix
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#issue-uncertain-if-review-findings-are-valid" class="md-nav__link">
    <span class="md-ellipsis">
      
        Issue: Uncertain if review findings are valid
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-workflow-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Appendix: Workflow Evolution
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="pr-development-workflow">PR Development Workflow<a class="headerlink" href="#pr-development-workflow" title="Permanent link">&para;</a></h1>
<p><strong>Status:</strong> Active (v3.0 - updated 2026-02-23)</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#current-template-versions">Current Template Versions</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#quick-reference-simplified-invocations">Quick Reference: Simplified Invocations</a></li>
<li><a href="#step-by-step-process">Step-by-Step Process</a></li>
<li><a href="#step-1-create-isolated-worktree-using-using-git-worktrees-skill">Step 1: Create Isolated Worktree</a></li>
<li><a href="#step-2-create-implementation-plan-using-writing-plans-skill">Step 2: Create Implementation Plan</a></li>
<li><a href="#step-25-multi-perspective-plan-review-rounds">Step 2.5: Multi-Perspective Plan Review</a></li>
<li><a href="#step-3-human-review-of-plan">Step 3: Human Review of Plan</a></li>
<li><a href="#step-4-execute-plan-using-executing-plans-skill">Step 4: Execute Plan</a></li>
<li><a href="#step-45-multi-perspective-code-review-rounds">Step 4.5: Multi-Perspective Code Review</a></li>
<li><a href="#step-475-pre-commit-self-audit-no-agent--deliberate-thinking">Step 4.75: Pre-Commit Self-Audit</a></li>
<li><a href="#step-5-commit-push-and-create-pr-using-commit-commandscommit-push-pr">Step 5: Commit, Push, and Create PR</a></li>
<li><a href="#workflow-variants">Workflow Variants</a></li>
<li><a href="#pr-size-tiers">PR Size Tiers</a></li>
<li><a href="#skill-reference-quick-guide">Skill Reference Quick Guide</a></li>
<li><a href="#example-a-macro-plan-pr-workflow-same-session-with-worktrees">Example A: Macro Plan PR</a></li>
<li><a href="#example-b-issuedesign-doc-pr-workflow">Example B: Issue/Design-Doc PR</a></li>
<li><a href="#tips-for-success">Tips for Success</a></li>
<li><a href="#common-issues-and-solutions">Common Issues and Solutions</a></li>
<li><a href="#appendix-workflow-evolution">Appendix: Workflow Evolution</a></li>
</ul>
<p>This document describes the complete workflow for implementing a PR from any source: a macro plan section, GitHub issues, a design document, or a feature request.</p>
<h2 id="current-template-versions">Current Template Versions<a class="headerlink" href="#current-template-versions" title="Permanent link">&para;</a></h2>
<p><strong>Update this section when templates change. All examples below reference these versions.</strong></p>
<ul>
<li><strong>Design guidelines:</strong> <code>docs/templates/design-guidelines.md</code> — DES foundations, module architecture, extension framework. Read before writing any design doc or macro plan.</li>
<li><strong>Macro-planning template:</strong> <code>docs/templates/macro-plan.md</code> (updated 2026-02-18 — aligned with design guidelines)</li>
<li><strong>Micro-planning template:</strong> <code>docs/templates/micro-plan.md</code> (updated 2026-02-18)</li>
<li><strong>Active macro plan:</strong> <code>docs/plans/2026-02-19-weighted-scoring-macro-plan.md</code> (scorer framework)</li>
<li><strong>Archived design docs:</strong> <code>docs/plans/archive/</code> (completed design docs for reference)</li>
</ul>
<hr />
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>This workflow requires the following Claude Code skills to be available:</p>
<table>
<thead>
<tr>
<th>Skill</th>
<th>Purpose</th>
<th>Used In</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>commit-commands:clean_gone</code></td>
<td>Clean up stale branches before worktree creation</td>
<td>Step 1 (pre-cleanup)</td>
</tr>
<tr>
<td><code>superpowers:using-git-worktrees</code></td>
<td>Create isolated workspace for PR work</td>
<td>Step 1</td>
</tr>
<tr>
<td><code>superpowers:writing-plans</code></td>
<td>Generate implementation plan from templates</td>
<td>Step 2</td>
</tr>
<tr>
<td><code>pr-review-toolkit:review-pr</code></td>
<td>Holistic cross-cutting review (pre-pass)</td>
<td>Step 2.5, Step 4.5</td>
</tr>
<tr>
<td><code>convergence-review</code></td>
<td>Dispatch parallel perspectives and enforce convergence</td>
<td>Step 2.5, Step 4.5</td>
</tr>
<tr>
<td><code>superpowers:executing-plans</code></td>
<td>Execute plan tasks continuously</td>
<td>Step 4</td>
</tr>
<tr>
<td><code>superpowers:systematic-debugging</code></td>
<td>Structured root-cause analysis on failure</td>
<td>Step 4 (on failure)</td>
</tr>
<tr>
<td><code>superpowers:verification-before-completion</code></td>
<td>Enforced verification gate before commit</td>
<td>Step 4.5 (after passes)</td>
</tr>
<tr>
<td><code>commit-commands:commit-push-pr</code></td>
<td>Commit, push, and create PR</td>
<td>Step 5</td>
</tr>
</tbody>
</table>
<p><strong>Verification:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># List all available skills</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>/agents
</code></pre></div></p>
<p><strong>If a required skill is unavailable:</strong>
- Check Claude Code version (skills may be added in newer versions)
- Check skill installation in <code>~/.claude/plugins/</code> or <code>~/.claude/skills/</code>
- For official superpowers skills, ensure plugins are up to date</p>
<p><strong>Alternative workflows:</strong>
If skills are unavailable, you can implement each step manually:
- Step 1: Use <code>git worktree add ../repo-prN -b prN-name</code> directly
- Step 2: Follow <code>docs/templates/micro-plan.md</code> template manually
- Step 2.5/4.5: Manual code review or skip automated review
- Step 4: Implement tasks manually following plan; on failure, debug manually
- Step 4.75: Self-audit is always available (no skill required — just critical thinking)
- Step 5: Use standard git commands (<code>git add</code>, <code>git commit</code>, <code>git push</code>, <code>gh pr create</code>)</p>
<hr />
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>┌─────────────────────────┐
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>│ Step 1: using-worktrees │ (Create isolated workspace for PR)
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>└──────────┬──────────────┘
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>           │
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>           ▼
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>┌─────────────────────────┐
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>│ Step 2: writing-plans   │ (Create behavioral contracts + executable tasks)
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>└──────────┬──────────────┘
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>           │
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>           ▼
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>┌─────────────────────────┐
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>│ Step 2.5: plan review   │ (review-pr pre-pass → convergence-review)
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>└──────────┬──────────────┘
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>           │
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>           ▼
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>┌─────────────────────────┐
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>│ Step 3: Human Review    │ (Approve plan)
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>└──────────┬──────────────┘
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>           │
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>           ▼
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>┌─────────────────────────┐
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>│ Step 4: executing-plans │ (Implement tasks continuously)
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>└──────────┬──────────────┘
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>           │
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>           ▼
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>┌─────────────────────────┐
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>│ Step 4.5: code review   │ (review-pr pre-pass → convergence-review)
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>└──────────┬──────────────┘
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>           │
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>           ▼
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>┌─────────────────────────┐
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>│ Step 4.75: self-audit   │ (Deliberate critical thinking — no agent)
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>└──────────┬──────────────┘
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>           │
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>           ▼
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>┌─────────────────────────┐
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>│ Step 5: commit-push-pr  │ (Commit, push, create PR - all in one)
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>└─────────────────────────┘
</code></pre></div>
<p><strong>Key insights:</strong>
1. <strong>Worktree isolation from start</strong> (Step 1) - Create worktree BEFORE any work
   - Entire PR lifecycle (planning + implementation) in isolated workspace
   - Main worktree never touched
   - Enables parallel work on multiple PRs</p>
<ol>
<li><strong>Three-stage quality assurance:</strong></li>
<li><strong>Plan Review</strong> (Step 2.5) - two-stage: holistic <code>review-pr</code> pre-pass, then <code>convergence-review</code> with 10 targeted perspectives<ul>
<li>Catches design issues before implementation</li>
</ul>
</li>
<li><strong>Code Review</strong> (Step 4.5) - two-stage: holistic <code>review-pr</code> pre-pass, then <code>convergence-review</code> with 10 targeted perspectives<ul>
<li>Catches implementation issues before PR creation</li>
</ul>
</li>
<li><strong>Self-Audit</strong> (Step 4.75) - Deliberate critical thinking across 10 dimensions<ul>
<li>Catches substance bugs that pattern-matching agents miss</li>
</ul>
</li>
</ol>
<hr />
<h2 id="quick-reference-simplified-invocations">Quick Reference: Simplified Invocations<a class="headerlink" href="#quick-reference-simplified-invocations" title="Permanent link">&para;</a></h2>
<p><strong>No copy-pasting required!</strong> Use @ file references and simple commands:</p>
<table>
<thead>
<tr>
<th>Step</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>1. Create worktree</strong></td>
<td><code>/superpowers:using-git-worktrees pr&lt;N&gt;-&lt;name&gt;</code></td>
</tr>
<tr>
<td><strong>2. Create plan</strong></td>
<td><code>/superpowers:writing-plans for &lt;work-item&gt; in @docs/plans/&lt;name&gt;-plan.md using @docs/templates/micro-plan.md and @&lt;source-document&gt;</code></td>
</tr>
<tr>
<td><strong>2.5. Review plan</strong></td>
<td><code>/pr-review-toolkit:review-pr</code> then <code>/convergence-review pr-plan docs/plans/pr&lt;N&gt;-&lt;name&gt;-plan.md</code></td>
</tr>
<tr>
<td><strong>3. Human review plan</strong></td>
<td>Review contracts, tasks, appendix, then approve to proceed</td>
</tr>
<tr>
<td><strong>4. Execute plan</strong></td>
<td><code>/superpowers:executing-plans @docs/plans/pr&lt;N&gt;-&lt;name&gt;-plan.md</code></td>
</tr>
<tr>
<td><strong>4.5. Review code</strong></td>
<td><code>/pr-review-toolkit:review-pr</code> then <code>/convergence-review pr-code</code></td>
</tr>
<tr>
<td><strong>4.75. Self-audit</strong></td>
<td>Deliberate critical thinking: logic, design, determinism, consistency, docs, edge cases, test epistemology, construction sites, error paths, docs DRY</td>
</tr>
<tr>
<td><strong>5. Commit, push, PR</strong></td>
<td><code>/commit-commands:commit-push-pr</code></td>
</tr>
</tbody>
</table>
<p><strong>Example for PR 8 (same-session workflow with <code>.worktrees/</code>):</strong></p>
<blockquote>
<p><strong>Note:</strong> Examples below use file paths from completed PRs. Referenced plan files may have been archived or removed. Adapt the pattern using current plans from <code>docs/plans/</code>.
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Step 1: Create worktree (stays in same session)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>/superpowers:using-git-worktrees<span class="w"> </span>pr8-routing-state-and-policy-bundle
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Output: Worktree ready at .worktrees/pr8-routing-state-and-policy-bundle/</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1"># (shell cwd already switched — continue directly)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1"># Step 2: Create plan</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>/superpowers:writing-plans<span class="w"> </span><span class="k">for</span><span class="w"> </span>PR8<span class="w"> </span><span class="k">in</span><span class="w"> </span>@docs/plans/pr8-routing-state-and-policy-bundle-plan.md<span class="w"> </span>using<span class="w"> </span>@docs/templates/micro-plan.md<span class="w"> </span>and<span class="w"> </span>@docs/plans/2026-02-11-macro-implementation-plan-v2.md
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="c1"># Step 2.5: Review plan (two-stage)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>/pr-review-toolkit:review-pr
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>/convergence-review<span class="w"> </span>pr-plan<span class="w"> </span>docs/plans/pr8-routing-state-and-policy-bundle-plan.md<span class="w">  </span><span class="c1"># [--model opus|sonnet|haiku]</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="c1"># Step 3: Human review</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="c1"># [Read plan, verify contracts and tasks, approve to proceed]</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="c1"># Step 4: Execute implementation</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>/superpowers:executing-plans<span class="w"> </span>@docs/plans/pr8-routing-state-and-policy-bundle-plan.md
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="c1"># Step 4.5: Review code (two-stage)</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>/pr-review-toolkit:review-pr
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>/convergence-review<span class="w"> </span>pr-code<span class="w">  </span><span class="c1"># [--model opus|sonnet|haiku]</span>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="c1"># Step 5: Commit, push, and create PR</span>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>/commit-commands:commit-push-pr
</code></pre></div></p>
</blockquote>
<p><strong>Example (separate-session workflow with sibling directory):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Step 1: Create worktree</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>/superpowers:using-git-worktrees<span class="w"> </span>pr6-routing-policy
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="c1"># Output: Worktree created at ../inference-sim-pr6/</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="c1"># Open NEW Claude Code session in worktree:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="c1"># Terminal: cd ../inference-sim-pr6/ &amp;&amp; claude</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="c1"># Steps 2-5: Same as above, in the new session</span>
</code></pre></div></p>
<hr />
<h2 id="step-by-step-process">Step-by-Step Process<a class="headerlink" href="#step-by-step-process" title="Permanent link">&para;</a></h2>
<h3 id="step-1-create-isolated-worktree-using-using-git-worktrees-skill">Step 1: Create Isolated Worktree Using <code>using-git-worktrees</code> Skill<a class="headerlink" href="#step-1-create-isolated-worktree-using-using-git-worktrees-skill" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Main repo (inference-sim)</p>
<p><strong>Pre-cleanup (optional):</strong> Run <code>commit-commands:clean_gone</code> to remove stale local branches whose remote tracking branches have been deleted. This prevents <code>.worktrees/</code> from accumulating cruft from previous PRs.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>/commit-commands:clean_gone
</code></pre></div>
<p><strong>Skill:</strong> <code>superpowers:using-git-worktrees</code></p>
<p><strong>Why first?</strong> Create isolated workspace BEFORE any work begins. This ensures:
- Main worktree stays clean (no uncommitted plans or code)
- Plan document committed on feature branch (not main)
- Complete isolation for entire PR lifecycle (planning + implementation)
- Ability to work on multiple PRs in parallel</p>
<p><strong>Invocation (simplified):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>/superpowers:using-git-worktrees pr&lt;N&gt;-&lt;feature-name&gt;
</code></pre></div></p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>/superpowers:using-git-worktrees pr6-routing-policy
</code></pre></div></p>
<p><strong>What Happens:</strong>
- Creates a new git worktree (project-local in <code>.worktrees/</code> or as a sibling directory)
- Creates and checks out a new branch (<code>pr6-routing-policy</code>)
- Shell working directory switches to the worktree
- Isolates work from main development</p>
<p><strong>Output:</strong> Path to worktree directory (e.g., <code>.worktrees/pr6-routing-policy/</code>)</p>
<p><strong>Next — choose one:</strong></p>
<ul>
<li>
<p><strong>Continue in same session (recommended for <code>.worktrees/</code>):</strong> The skill already switched your working directory into the worktree. You can proceed directly to Step 2 in the same Claude Code session.</p>
</li>
<li>
<p><strong>Open a new session (required for sibling directories):</strong> If the worktree is outside the project (e.g., <code>../inference-sim-pr6/</code>), open a new Claude Code session there:
  <div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">cd</span><span class="w"> </span>../inference-sim-pr6/
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>claude
</code></pre></div></p>
</li>
</ul>
<p><strong>All remaining steps happen in the worktree (same session or new session).</strong></p>
<hr />
<h3 id="step-2-create-implementation-plan-using-writing-plans-skill">Step 2: Create Implementation Plan Using <code>writing-plans</code> Skill<a class="headerlink" href="#step-2-create-implementation-plan-using-writing-plans-skill" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (same or new session)</p>
<p><strong>Skill:</strong> <code>superpowers:writing-plans</code></p>
<p><strong>Invocation (simplified):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>/superpowers:writing-plans for &lt;work-item&gt; in @docs/plans/&lt;name&gt;-plan.md using @docs/templates/micro-plan.md and @&lt;source-document&gt;
</code></pre></div></p>
<p>The <code>&lt;source-document&gt;</code> can be any of:
- A macro plan: <code>@docs/plans/&lt;active-macro-plan&gt;.md</code> (e.g., <code>@docs/plans/2026-02-19-weighted-scoring-macro-plan.md</code>)
- A design document: <code>@docs/plans/&lt;design-doc&gt;.md</code> or <code>@docs/plans/archive/&lt;design-doc&gt;.md</code>
- GitHub issues: reference by number in the prompt text (e.g., "for issues #183, #189, #195")</p>
<p><strong>Examples:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a># From macro plan section:
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>/superpowers:writing-plans for PR6 in @docs/plans/pr6-routing-policy-plan.md using @docs/templates/micro-plan.md and @docs/plans/2026-02-11-macro-implementation-plan-v2.md
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a># From design document:
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>/superpowers:writing-plans for hardening PR in @docs/plans/hardening-plan.md using @docs/templates/micro-plan.md and @docs/plans/2026-02-18-hardening-antipattern-refactoring-design.md
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a># From GitHub issues:
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>/superpowers:writing-plans for issues #183 #189 #195 in @docs/plans/kv-bugfix-plan.md using @docs/templates/micro-plan.md
</code></pre></div></p>
<p><strong>What Happens:</strong>
- Claude reads the source document (macro plan section, design doc, or issue descriptions)
- Claude reads <code>docs/templates/micro-plan.md</code> as the template
- Claude inspects the codebase (Phase 0: Component Context)
- Claude creates behavioral contracts (Phase 1)
- Claude breaks implementation into 6-12 TDD tasks (Phase 4)
- Claude saves plan to the specified output file <strong>in the worktree</strong></p>
<p><strong>Output:</strong>
- Plan file at <code>docs/plans/&lt;name&gt;-plan.md</code> (in worktree, on feature branch)
- Contains: behavioral contracts, executable tasks, test strategy, appendix</p>
<p><strong>Tips:</strong>
- Use @ file references instead of copy-pasting
- Claude automatically extracts the relevant context from the source document
- Template structure is preserved automatically
- For issue-based work, Claude reads issue details via <code>gh issue view</code></p>
<hr />
<h3 id="step-25-multi-perspective-plan-review-rounds">Step 2.5: Multi-Perspective Plan Review (Rounds)<a class="headerlink" href="#step-25-multi-perspective-plan-review-rounds" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (same or new session)</p>
<p><strong>Two-stage review (Claude Code):</strong></p>
<p><strong>Stage 1 — Holistic pre-pass:</strong> Run a single deep review to catch cross-cutting issues before the formal convergence protocol.
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>/pr-review-toolkit:review-pr
</code></pre></div>
Fix any issues found, then proceed to Stage 2.</p>
<p><strong>Stage 2 — Formal convergence:</strong> Dispatch 10 targeted perspectives in parallel with convergence enforcement.
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>/convergence-review pr-plan docs/plans/pr&lt;N&gt;-&lt;name&gt;-plan.md
</code></pre></div></p>
<p>The <code>convergence-review</code> skill dispatches all 10 perspectives in parallel, tallies findings independently, and enforces the re-run gate. See <a href="../convergence/">docs/process/convergence.md</a> for the protocol rules.</p>
<p><strong>Why two stages?</strong> <code>review-pr</code> does a holistic sweep that catches emergent cross-cutting issues (the kind a human reviewer would spot). Fixing those first means the convergence review starts from a cleaner baseline — fewer rounds needed because obvious issues are already addressed.</p>
<blockquote>
<p><strong>For Claude (manual alternative):</strong> When running without the skill, run all 10 perspectives below
<strong>in parallel</strong> as a single round. Use <code>/pr-review-toolkit:review-pr</code> with the <strong>exact
prompt text</strong> shown for Perspectives 1-4 and 6-10. Perform Perspective 5 directly (no agent).
Collect all findings, then report the full round results to the user.</p>
<p><strong>If 0 CRITICAL and 0 IMPORTANT findings:</strong> The round converged. Proceed to Step 3.</p>
<p><strong>If any CRITICAL or IMPORTANT findings:</strong> Fix all issues, then re-run the entire round
from scratch. Repeat until a round produces 0 CRITICAL and 0 IMPORTANT findings.</p>
</blockquote>
<p><strong>Why rounds with multiple perspectives?</strong> Generic "review everything" misses issues that targeted perspectives catch. Different lenses find different bugs: cross-doc consistency catches stale references, architecture catches boundary violations, substance catches design bugs. Running them in parallel maximizes coverage per round. The hypothesis process proved this model: 3 parallel reviewers with different foci caught issues that sequential single-reviewer rounds missed.</p>
<p>For convergence rules (max rounds, re-run requirements, severity definitions), see <a href="../convergence/">Universal Convergence Protocol</a>.</p>
<hr />
<h4 id="perspective-1-substance-design-review">Perspective 1: Substance &amp; Design Review<a class="headerlink" href="#perspective-1-substance-design-review" title="Permanent link">&para;</a></h4>
<p>Catch design bugs, mathematical errors, and logical flaws that structural checks miss.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>/pr-review-toolkit:review-pr Review this plan for substance: Are the behavioral contracts logically sound? Are there mathematical errors, scale mismatches, or unit confusions? Could the design actually achieve what the contracts promise? Check formulas, thresholds, and edge cases from first principles — not just structural completeness. @docs/plans/&lt;name&gt;-plan.md
</code></pre></div></p>
<p><strong>Catches:</strong> Design bugs, mathematical errors, logical inconsistencies, scale mismatches, missing edge cases.</p>
<p><strong>Why this perspective exists:</strong> In PR9, the fitness normalization formula (<code>1/(1+value)</code>) passed all structural checks but was a design bug (500,000x scale imbalance between throughput and latency). A substance-focused review caught what structure-focused reviews missed.</p>
<hr />
<h4 id="perspective-2-cross-document-consistency">Perspective 2: Cross-Document Consistency<a class="headerlink" href="#perspective-2-cross-document-consistency" title="Permanent link">&para;</a></h4>
<p>Verify the micro plan matches the source document and both match the codebase.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>/pr-review-toolkit:review-pr Does the micro plan&#39;s scope match the source document? Are file paths consistent? Does the deviation log account for all differences between what the source says and what the micro plan does? Check for stale references. @docs/plans/&lt;name&gt;-plan.md and @&lt;source-document&gt;
</code></pre></div></p>
<p>For issue-based work, replace <code>@&lt;source-document&gt;</code> with the issue numbers in the prompt text.</p>
<p><strong>Catches:</strong> Stale references, scope mismatch, missing deviations, wrong file paths.</p>
<hr />
<h4 id="perspective-3-architecture-boundary-verification">Perspective 3: Architecture Boundary Verification<a class="headerlink" href="#perspective-3-architecture-boundary-verification" title="Permanent link">&para;</a></h4>
<p>Verify the plan respects architectural boundaries and separation of concerns.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>/pr-review-toolkit:review-pr Does this plan maintain architectural boundaries? Are we ensuring individual instances don&#39;t have access to cluster-level state? Are types in the right packages? Check the plan against the actual code for boundary violations. Also check: (1) does the plan introduce multiple construction sites for the same type? (2) does adding one field to a new type require &gt;3 files? (3) does library code (sim/) call logrus.Fatalf anywhere in the new code? @docs/plans/pr&lt;N&gt;-&lt;name&gt;-plan.md
</code></pre></div></p>
<p><strong>Catches:</strong> Import cycle risks, boundary violations, missing bridge types, wrong abstraction level, construction site proliferation, high touch-point multipliers, error handling boundary violations.</p>
<hr />
<h4 id="perspective-4-codebase-readiness">Perspective 4: Codebase Readiness<a class="headerlink" href="#perspective-4-codebase-readiness" title="Permanent link">&para;</a></h4>
<p>Verify the files to be modified are clean and ready for the planned changes.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>/pr-review-toolkit:review-pr We&#39;re about to implement this PR. Review the codebase for readiness. Check each file the plan will modify for stale comments, existing bugs, or issues that would complicate implementation. @docs/plans/pr&lt;N&gt;-&lt;name&gt;-plan.md
</code></pre></div></p>
<p><strong>Catches:</strong> Stale comments ("planned for PR N"), pre-existing bugs, missing dependencies, unclear insertion points.</p>
<hr />
<h4 id="perspective-5-plan-structural-validation">Perspective 5: Plan Structural Validation<a class="headerlink" href="#perspective-5-plan-structural-validation" title="Permanent link">&para;</a></h4>
<p>Verify the plan is complete, internally consistent, and implementation-ready.</p>
<blockquote>
<p><strong>For Claude:</strong> Perform these 4 checks directly (no agent needed). Report all issues found.</p>
</blockquote>
<p><strong>Check 1: Task Dependencies</strong>
- For each task, verify it can actually start given what comes before it.
- Trace the dependency chain: what files does each task create/modify? Does any task require a file or type that hasn't been created yet?
- Flag tasks that modify the same file and could conflict.</p>
<p><strong>Check 2: Template Completeness</strong>
- Verify all sections from <code>docs/templates/micro-plan.md</code> are present and non-empty:
  - Header (Goal, Architecture, Source Reference)
  - Part 1: A) Executive Summary, B) Behavioral Contracts, C) Component Interaction, D) Deviation Log, E) Review Guide
  - Part 2: F) Implementation Overview, G) Task Breakdown, H) Test Strategy, I) Risk Analysis
  - Part 3: J) Sanity Checklist
  - Appendix: File-Level Details</p>
<p><strong>Check 3: Executive Summary Clarity</strong>
- Read the executive summary as if you're a new team member with no context.
- Is it clear what the PR does and why?
- Can you understand the scope without reading the rest of the plan?</p>
<p><strong>Check 4: Under-specified Tasks</strong>
- For each task, verify it has complete code in every step (no "add validation" without showing exact code).
- Verify exact test commands with expected output.
- Verify exact commit commands.
- Flag any step that an executing agent would need to figure out on its own.</p>
<p><strong>Catches:</strong> Broken task ordering, missing template sections, unclear summaries, vague implementation steps that will cause agent confusion.</p>
<hr />
<h4 id="perspective-6-des-expert-review">Perspective 6: DES Expert Review<a class="headerlink" href="#perspective-6-des-expert-review" title="Permanent link">&para;</a></h4>
<p>Catch event-driven simulation bugs that domain-agnostic reviewers miss.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>/pr-review-toolkit:review-pr Review this plan as a discrete-event simulation expert. Check for: event ordering bugs, clock monotonicity violations, stale signal propagation between event types, heap priority errors, event-driven race conditions, and incorrect assumptions about DES event processing semantics. Verify that any new events respect the (timestamp, priority, seqID) ordering contract.
</code></pre></div></p>
<p><strong>Catches:</strong> Event ordering violations, clock regression, stale-signal bugs, priority inversion in event queues.</p>
<hr />
<h4 id="perspective-7-vllmsglang-expert-review">Perspective 7: vLLM/SGLang Expert Review<a class="headerlink" href="#perspective-7-vllmsglang-expert-review" title="Permanent link">&para;</a></h4>
<p>Catch mismatches between BLIS's model and real inference server behavior.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>/pr-review-toolkit:review-pr Review this plan as a vLLM/SGLang inference serving expert. Check for: batching semantics that don&#39;t match real continuous-batching servers, KV cache eviction policies that differ from vLLM&#39;s implementation, chunked prefill behavior mismatches, preemption policy differences, and missing scheduling features that real servers have. Flag any assumption about LLM serving that this plan gets wrong.
</code></pre></div></p>
<p><strong>Catches:</strong> Batching model inaccuracies, KV cache behavior mismatches, prefill/decode pipeline errors, scheduling assumption violations.</p>
<hr />
<h4 id="perspective-8-distributed-inference-platform-expert-review">Perspective 8: Distributed Inference Platform Expert Review<a class="headerlink" href="#perspective-8-distributed-inference-platform-expert-review" title="Permanent link">&para;</a></h4>
<p>Catch multi-instance coordination and routing issues.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>/pr-review-toolkit:review-pr Review this plan as a distributed inference platform expert (llm-d, KServe, vLLM multi-node). Check for: multi-instance coordination bugs, routing load imbalance under high request rates, stale snapshot propagation between instances, admission control edge cases at scale, horizontal scaling assumption violations, and prefix-affinity routing correctness across instances.
</code></pre></div></p>
<p><strong>Catches:</strong> Load imbalance, stale routing state, admission control failures, scaling assumption violations, cross-instance coordination bugs.</p>
<hr />
<h4 id="perspective-9-performance-scalability-analyst">Perspective 9: Performance &amp; Scalability Analyst<a class="headerlink" href="#perspective-9-performance-scalability-analyst" title="Permanent link">&para;</a></h4>
<p>Catch algorithmic and memory efficiency issues.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>/pr-review-toolkit:review-pr Review this plan as a performance and scalability analyst. Check for: algorithmic complexity issues (O(n²) where O(n) suffices), unnecessary allocations in hot paths, map iteration in O(n) loops that could grow, benchmark-sensitive changes, memory growth patterns, and any changes that would degrade performance at 1000+ requests or 10+ instances.
</code></pre></div></p>
<p><strong>Catches:</strong> Algorithmic complexity regressions, hot-path allocations, memory growth, scalability bottlenecks.</p>
<hr />
<h4 id="perspective-10-security-robustness-reviewer">Perspective 10: Security &amp; Robustness Reviewer<a class="headerlink" href="#perspective-10-security-robustness-reviewer" title="Permanent link">&para;</a></h4>
<p>Catch input validation gaps and failure mode issues.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>/pr-review-toolkit:review-pr Review this plan as a security and robustness reviewer. Check for: input validation completeness (all CLI flags, YAML fields, config values), panic paths reachable from user input, resource exhaustion vectors (unbounded loops, unlimited memory growth), degenerate input handling (empty, zero, negative, NaN, Inf), and configuration injection risks.
</code></pre></div></p>
<p><strong>Catches:</strong> Input validation gaps, user-reachable panics, resource exhaustion, degenerate input failures, injection risks.</p>
<hr />
<h3 id="step-3-human-review-of-plan">Step 3: Human Review of Plan<a class="headerlink" href="#step-3-human-review-of-plan" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (same or new session)</p>
<p><strong>Action:</strong> Final human review of the plan (after automated review)</p>
<p><strong>Focus Areas:</strong>
1. <strong>Part 1 (Design Validation)</strong> - Review behavioral contracts, component interaction, risks
2. <strong>Part 2 (Executable Tasks)</strong> - Verify task breakdown makes sense, no dead code
3. <strong>Deviation Log</strong> - Check if deviations from source document are justified
4. <strong>Appendix</strong> - Spot-check file-level details for accuracy</p>
<p><strong>Common Issues to Catch:</strong>
- Behavioral contracts too vague or missing edge cases
- Tasks not properly ordered (dependencies)
- Missing test coverage for contracts
- Deviations from source document not justified
- Dead code or scaffolding</p>
<p><strong>Outcome:</strong>
- ✅ Approve plan → proceed to Step 4 (implementation)
- ❌ Need revisions → iterate with Claude, re-review (Step 2.5), then approve</p>
<p><strong>Note:</strong> The plan will be committed together with the implementation in Step 5 (single commit for entire PR).</p>
<hr />
<h3 id="step-4-execute-plan-using-executing-plans-skill">Step 4: Execute Plan Using <code>executing-plans</code> Skill<a class="headerlink" href="#step-4-execute-plan-using-executing-plans-skill" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (same or new session)</p>
<p><strong>Skill:</strong> <code>superpowers:executing-plans</code></p>
<p><strong>Invocation (simplified):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>/superpowers:executing-plans @docs/plans/pr&lt;N&gt;-&lt;feature-name&gt;-plan.md
</code></pre></div></p>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>/superpowers:executing-plans @docs/plans/pr6-routing-policy-plan.md
</code></pre></div></p>
<p><strong>That's it!</strong> The skill automatically:
- Reads the plan
- Executes all tasks continuously (no pausing for human input)
- Stops only on test failure, lint failure, or build error</p>
<p><strong>What Happens:</strong>
- Claude reads the plan file
- Claude executes all tasks sequentially without pausing
  - Each task: write test → verify fail → implement → verify pass → lint → commit
- If a failure occurs, Claude stops and reports the issue
- On success, all tasks complete and Claude reports a summary</p>
<p><strong>On Failure:</strong> If a task fails (test failure, build error, lint error), invoke structured debugging instead of ad-hoc poking:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>/superpowers:systematic-debugging
</code></pre></div>
<p>This skill provides structured root-cause analysis: reproduce → isolate → hypothesize → verify → fix. Prevents the common pattern of making random changes hoping the test passes. After the fix, resume execution from the failing task.</p>
<p><strong>Output:</strong>
- Implemented code in working directory
- All tests passing (<code>go test ./...</code>)
- Lint clean (<code>golangci-lint run ./...</code>)
- Commits for each task (referencing contracts)</p>
<hr />
<h3 id="step-45-multi-perspective-code-review-rounds">Step 4.5: Multi-Perspective Code Review (Rounds)<a class="headerlink" href="#step-45-multi-perspective-code-review-rounds" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (after implementation complete)</p>
<p><strong>Two-stage review (Claude Code):</strong></p>
<p><strong>Stage 1 — Holistic pre-pass:</strong> Run a single deep review to catch cross-cutting issues before the formal convergence protocol.
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>/pr-review-toolkit:review-pr
</code></pre></div>
Fix any issues found, then proceed to Stage 2.</p>
<p><strong>Stage 2 — Formal convergence:</strong> Dispatch 10 targeted perspectives in parallel with convergence enforcement.
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>/convergence-review pr-code
</code></pre></div></p>
<p>The <code>convergence-review</code> skill dispatches all 10 perspectives in parallel, tallies findings independently, and enforces the re-run gate. See <a href="../convergence/">docs/process/convergence.md</a> for the protocol rules.</p>
<p><strong>Why two stages?</strong> <code>review-pr</code> does a holistic sweep that catches emergent cross-cutting issues. In past PRs, this pre-pass found issues (runtime-breaking regressions, stale panic message prefixes) that individual targeted perspectives missed because they were each focused on their narrow lens. Fixing those first reduces convergence rounds.</p>
<blockquote>
<p><strong>For Claude (manual alternative):</strong> When running without the skill, run all 10 perspectives below
<strong>in parallel</strong> as a single round. Use <code>/pr-review-toolkit:review-pr</code> with the <strong>exact
prompt text</strong> shown for each perspective. Collect all findings, then report the full round.</p>
<p><strong>If 0 CRITICAL and 0 IMPORTANT findings:</strong> The round converged. Run verification gate.</p>
<p><strong>If any CRITICAL or IMPORTANT findings:</strong> Fix all issues, then re-run the entire round
from scratch. Repeat until convergence (see <a href="../convergence/">Universal Convergence Protocol</a>).</p>
</blockquote>
<p><strong>Why 10 perspectives in parallel?</strong> Each catches issues the others miss. In the standards-audit-hardening PR, Perspective 1 (substance) found a runtime-breaking regression, Perspective 3 (tests) found weakened coverage, Perspective 7 (vLLM expert) confirmed CLI validation matches real server semantics, and Perspective 10 (security) found pre-existing factory validation gaps. Domain-specific perspectives (DES, vLLM, distributed platform) catch issues that generic code-quality reviewers miss.</p>
<hr />
<h4 id="perspective-1-substance-design">Perspective 1: Substance &amp; Design<a class="headerlink" href="#perspective-1-substance-design" title="Permanent link">&para;</a></h4>
<p>Catch logic bugs, design mismatches, and mathematical errors in the implementation.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>/pr-review-toolkit:review-pr Review this diff for substance: Are there logic bugs, design mismatches between contracts and implementation, mathematical errors, or silent regressions? Check from first principles — not just structural patterns. Does the implementation actually achieve what the behavioral contracts promise?
</code></pre></div></p>
<p><strong>Catches:</strong> Design bugs, formula errors, silent regressions, semantic mismatches between intent and implementation.</p>
<hr />
<h4 id="perspective-2-code-quality-error-handling">Perspective 2: Code Quality + Error Handling<a class="headerlink" href="#perspective-2-code-quality-error-handling" title="Permanent link">&para;</a></h4>
<p>Find bugs, logic errors, silent failures, and convention violations.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>/pr-review-toolkit:review-pr Also check: (1) any new error paths that use `continue` or early `return` — do they clean up partial state? (2) any map iteration that accumulates floats — are keys sorted? (3) any struct field added — are all construction sites updated? (4) does library code (sim/) call logrus.Fatalf anywhere in new code? (5) any exported mutable maps — should they be unexported with IsValid*() accessors? (6) any YAML config fields using float64 instead of *float64 where zero is valid? (7) any division where the denominator derives from runtime state without a zero guard? (8) any new interface with methods only meaningful for one implementation? (9) any method &gt;50 lines spanning multiple concerns (scheduling + latency + metrics)? (10) any changes to docs/standards/ files — are CLAUDE.md working copies updated to match?
</code></pre></div></p>
<p><strong>Catches:</strong> Logic errors, nil pointer risks, silent failures (discarded return values), panic paths reachable from user input, CLAUDE.md convention violations, dead code, silent <code>continue</code> data loss, non-deterministic map iteration, construction site drift, library code calling os.Exit, exported mutable maps, YAML zero-value ambiguity, division by zero in runtime computation, leaky interfaces, monolith methods, documentation drift.</p>
<hr />
<h4 id="perspective-3-test-behavioral-quality">Perspective 3: Test Behavioral Quality<a class="headerlink" href="#perspective-3-test-behavioral-quality" title="Permanent link">&para;</a></h4>
<p>Verify tests are truly behavioral (testing WHAT) not structural (testing HOW).</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>/pr-review-toolkit:review-pr Are all the tests well written and truly behavioral? Do they test observable behavior (GIVEN/WHEN/THEN) or just assert internal structure? Would they survive a refactor? Rate each test as Behavioral, Mixed, or Structural. Also check: are there any golden dataset tests (comparing against captured output values) that lack a corresponding invariant test? Golden tests encode current behavior as &quot;correct&quot; — if the code had a bug when the golden values were captured, the test perpetuates the bug. Flag any golden test whose expected values are not independently validated by an invariant test (e.g., request conservation, KV block conservation, causality).
</code></pre></div></p>
<p><strong>Catches:</strong> Structural tests (Go struct assignment, trivial getters), type assertions in factory tests, exact-formula assertions instead of behavioral invariants, tests that pass even if the feature is broken, golden-only tests that would perpetuate pre-existing bugs (issue #183: codellama golden dataset encoded a silently-dropped request as the expected value since its initial commit).</p>
<hr />
<h4 id="perspective-4-getting-started-experience">Perspective 4: Getting-Started Experience<a class="headerlink" href="#perspective-4-getting-started-experience" title="Permanent link">&para;</a></h4>
<p>Simulate the journey of a new user and a new contributor.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>/pr-review-toolkit:review-pr Is it easy for a user and contributor to get started? Simulate both journeys: (1) a user doing capacity planning with the CLI, and (2) a contributor adding a new algorithm. Where would they get stuck? What&#39;s missing?
</code></pre></div></p>
<p><strong>Catches:</strong> Missing example files, undocumented output metrics, incomplete contributor guide, unclear extension points, README not updated for new features.</p>
<hr />
<h4 id="perspective-5-automated-reviewer-simulation">Perspective 5: Automated Reviewer Simulation<a class="headerlink" href="#perspective-5-automated-reviewer-simulation" title="Permanent link">&para;</a></h4>
<p>Catch what GitHub Copilot, Claude, and Codex would flag.</p>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>/pr-review-toolkit:review-pr The upstream community uses github copilot, claude, codex apps to perform a review of this PR. Please do a rigorous check (and fix any issues) so that this will pass the review.
</code></pre></div></p>
<p><strong>Catches:</strong> Exported mutable globals, user-controlled panic paths, YAML typo acceptance, NaN/Inf validation gaps, redundant code, style nits.</p>
<hr />
<h4 id="perspective-6-des-expert-review_1">Perspective 6: DES Expert Review<a class="headerlink" href="#perspective-6-des-expert-review_1" title="Permanent link">&para;</a></h4>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>/pr-review-toolkit:review-pr Review this diff as a discrete-event simulation expert. Check for: event ordering bugs, clock monotonicity violations, stale signal propagation between event types, heap priority errors, event-driven race conditions, work-conserving property violations, and incorrect assumptions about DES event processing semantics.
</code></pre></div></p>
<p><strong>Catches:</strong> Event ordering violations, clock regression, stale-signal bugs, work-conserving property gaps.</p>
<hr />
<h4 id="perspective-7-vllmsglang-expert-review_1">Perspective 7: vLLM/SGLang Expert Review<a class="headerlink" href="#perspective-7-vllmsglang-expert-review_1" title="Permanent link">&para;</a></h4>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>/pr-review-toolkit:review-pr Review this diff as a vLLM/SGLang inference serving expert. Check for: batching semantics that don&#39;t match real continuous-batching servers, KV cache eviction mismatches, chunked prefill behavior errors, preemption policy differences, and missing scheduling features. Flag any assumption about LLM serving that this code gets wrong.
</code></pre></div></p>
<p><strong>Catches:</strong> Batching model inaccuracies, KV cache behavior mismatches, scheduling assumption violations.</p>
<hr />
<h4 id="perspective-8-distributed-inference-platform-expert-review_1">Perspective 8: Distributed Inference Platform Expert Review<a class="headerlink" href="#perspective-8-distributed-inference-platform-expert-review_1" title="Permanent link">&para;</a></h4>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>/pr-review-toolkit:review-pr Review this diff as a distributed inference platform expert (llm-d, KServe, vLLM multi-node). Check for: multi-instance coordination bugs, routing load imbalance, stale snapshot propagation, admission control edge cases, horizontal scaling assumptions, and prefix-affinity routing correctness.
</code></pre></div></p>
<p><strong>Catches:</strong> Load imbalance, stale routing state, scaling assumption violations, cross-instance bugs.</p>
<hr />
<h4 id="perspective-9-performance-scalability-analyst_1">Perspective 9: Performance &amp; Scalability Analyst<a class="headerlink" href="#perspective-9-performance-scalability-analyst_1" title="Permanent link">&para;</a></h4>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>/pr-review-toolkit:review-pr Review this diff as a performance and scalability analyst. Check for: algorithmic complexity issues, unnecessary allocations in hot paths, map iteration in O(n) loops, benchmark-sensitive changes, memory growth patterns, and changes that would degrade performance at 1000+ requests or 10+ instances.
</code></pre></div></p>
<p><strong>Catches:</strong> Complexity regressions, hot-path allocations, memory growth, scalability bottlenecks.</p>
<hr />
<h4 id="perspective-10-security-robustness-reviewer_1">Perspective 10: Security &amp; Robustness Reviewer<a class="headerlink" href="#perspective-10-security-robustness-reviewer_1" title="Permanent link">&para;</a></h4>
<p><strong>Prompt:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>/pr-review-toolkit:review-pr Review this diff as a security and robustness reviewer. Check for: input validation completeness, panic paths reachable from user input, resource exhaustion vectors, degenerate input handling (empty, zero, NaN, Inf), and configuration injection risks.
</code></pre></div></p>
<p><strong>Catches:</strong> Validation gaps, user-reachable panics, resource exhaustion, degenerate input failures.</p>
<hr />
<h4 id="during-any-perspective-filing-pre-existing-issues">During Any Perspective: Filing Pre-Existing Issues<a class="headerlink" href="#during-any-perspective-filing-pre-existing-issues" title="Permanent link">&para;</a></h4>
<p>Review passes naturally surface pre-existing bugs in surrounding code. These are valuable discoveries but outside the current PR's scope.</p>
<p><strong>Rule:</strong> File a GitHub issue immediately. Do not fix in the current PR.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>gh<span class="w"> </span>issue<span class="w"> </span>create<span class="w"> </span>--title<span class="w"> </span><span class="s2">&quot;Bug: &lt;concise description&gt;&quot;</span><span class="w"> </span>--body<span class="w"> </span><span class="s2">&quot;&lt;location, impact, discovery context&gt;&quot;</span><span class="w"> </span>--label<span class="w"> </span>bug
</code></pre></div>
<p><strong>Label guide:</strong> Use <code>bug</code> for code defects, <code>design</code> for design limitations, <code>enhancement</code> for feature gaps, <code>hardening</code> for correctness/invariant issues. Every issue must have at least one label — unlabeled issues are invisible in filtered views.</p>
<p><strong>Why not fix in-PR?</strong>
- <strong>Scope creep</strong> — muddies the diff, makes review harder, risks introducing regressions in unrelated code
- <strong>Attribution</strong> — the fix deserves its own tests and its own commit history
- <strong>Tracking</strong> — issues that aren't filed are issues that are lost</p>
<p><strong>After filing:</strong> Reference the issue number in the PR description under a "Discovered Issues" section so reviewers know it was found and tracked.</p>
<p><strong>Example (from #38 log level recalibration):</strong> Code review found that <code>simulator.go:593</code> silently drops a request on KV allocation failure — a pre-existing bug predating the PR. Filed as #183 rather than fixing in-scope.</p>
<hr />
<h4 id="convergence-protocol">Convergence Protocol<a class="headerlink" href="#convergence-protocol" title="Permanent link">&para;</a></h4>
<p><strong>Canonical source:</strong> <a href="../convergence/">docs/process/convergence.md</a>. The same protocol applies to all review gates (PR plan, PR code, hypothesis design/code/FINDINGS).</p>
<p>In summary: run all perspectives as a parallel round. If zero CRITICAL and zero IMPORTANT across all reviewers, the round converged. If any CRITICAL or IMPORTANT from any reviewer, fix all issues and re-run the <strong>entire</strong> round. Max 10 rounds per gate. Hard gate — no exceptions.</p>
<p><strong>Executable implementation:</strong> <code>/convergence-review pr-code</code> (or <code>pr-plan</code>) automates dispatch, tallying, and re-run enforcement.</p>
<hr />
<h4 id="after-convergence-enforced-verification-gate">After Convergence: Enforced Verification Gate<a class="headerlink" href="#after-convergence-enforced-verification-gate" title="Permanent link">&para;</a></h4>
<blockquote>
<p><strong>For Claude:</strong> After fixing issues from all passes, invoke the verification skill to ensure
all claims are backed by evidence. This is non-optional — do NOT skip to Step 5.</p>
</blockquote>
<p><strong>Skill:</strong> <code>superpowers:verification-before-completion</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>/superpowers:verification-before-completion
</code></pre></div>
<p>This skill enforces running verification commands and confirming output before making any success claims. It requires:
- <code>go build ./...</code> — build passes
- <code>go test ./... -count=1</code> — all tests pass (with counts)
- <code>golangci-lint run ./...</code> — zero lint issues
- <code>git status</code> — working tree status reported</p>
<p><strong>Why a skill instead of prose?</strong> In PR9, the manual "run these commands" instruction was easy to skip or half-execute. The skill makes verification non-optional and evidence-based.</p>
<p>Report: build exit code, test pass/fail counts, lint issue count, working tree status.
Wait for user approval before proceeding to Step 4.75.</p>
<hr />
<h3 id="step-475-pre-commit-self-audit-no-agent-deliberate-thinking">Step 4.75: Pre-Commit Self-Audit (No Agent — Deliberate Thinking)<a class="headerlink" href="#step-475-pre-commit-self-audit-no-agent-deliberate-thinking" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (after verification gate passes)</p>
<blockquote>
<p><strong>For Claude:</strong> This is NOT an agent pass. Stop, think critically, and answer each question
below from your own reasoning. Do NOT dispatch agents or read files — you already have the
full context. Report all issues found. If you find zero issues, explain why you're confident
for each dimension.</p>
</blockquote>
<p><strong>Why this step exists:</strong> In PR9, the 4-perspective automated code review (Step 4.5) found 0 new issues in the final perspective. Then the user asked "are you confident?" and Claude found 3 real bugs by thinking critically: a wrong reference scale for token throughput normalization, non-deterministic map iteration in output, and inconsistent comment patterns. Automated review perspectives check structure; this step checks substance.</p>
<p><strong>Self-audit dimensions — think through each one:</strong></p>
<ol>
<li><strong>Logic bugs:</strong> Trace through the core algorithm mentally. Are there edge cases where the math breaks? Division by zero? Off-by-one? Wrong comparisons?</li>
<li><strong>Design bugs:</strong> Does the design actually achieve what the contracts promise? Would a user get the expected behavior? Are there scale mismatches, unit confusions, or semantic errors?</li>
<li><strong>Determinism (R2, INV-6):</strong> Is all output deterministic? Any map iteration used for ordered output? Any floating-point accumulation order dependencies?</li>
<li><strong>Consistency:</strong> Are naming patterns consistent across all changed files? Do comments match code? Do doc strings match implementations? Are there stale references?</li>
<li><strong>Documentation:</strong> Would a new user find everything they need? Would a contributor know how to extend this? Are CLI flags documented everywhere (CLAUDE.md, README, <code>--help</code>)?</li>
<li><strong>Defensive edge cases:</strong> What happens with zero input? Empty collections? Maximum values? What if the user passes unusual but valid flag combinations?</li>
<li><strong>Test epistemology (R7, R12):</strong> For every test that compares against a golden value, ask: "How do I know this expected value is correct?" If the answer is "because the code produced it," that test catches regressions but not pre-existing bugs. Verify a corresponding invariant test validates the result from first principles. (See issue #183: a golden test perpetuated a silently-dropped request for months.)</li>
<li><strong>Construction site uniqueness (R4):</strong> Does this PR add fields to existing structs? If so, are ALL construction sites updated? Grep for <code>StructName{</code> across the codebase. Are there canonical constructors, or are structs built inline in multiple places?</li>
<li><strong>Error path completeness (R1, R5):</strong> For every error/failure path in new code, what happens to partially-mutated state? Does every <code>continue</code> or early <code>return</code> clean up what was started? Is there a counter or log so the failure is observable?</li>
<li><strong>Documentation DRY (source-of-truth map):</strong> Does this PR modify content that exists as a working copy elsewhere? Check the source-of-truth map in <code>docs/standards/principles.md</code>. If a canonical source was updated (rules.md, invariants.md, principles.md, extension-recipes.md), verify all working copies listed in the map are also updated. If a new file or section was added, verify it appears in the File Organization tree. If a hypothesis experiment was completed, verify <code>hypotheses/README.md</code> is updated.</li>
</ol>
<p><strong>Fix all issues found. Then wait for user approval before Step 5.</strong></p>
<p><strong>Why no agent?</strong> Agents are good at pattern-matching (finding style violations, checking structure). They're bad at stepping back and asking "does this actually make sense?" That requires the kind of critical thinking that only happens when you deliberately pause and reflect.</p>
<hr />
<h3 id="step-5-commit-push-and-create-pr-using-commit-commandscommit-push-pr">Step 5: Commit, Push, and Create PR Using <code>commit-commands:commit-push-pr</code><a class="headerlink" href="#step-5-commit-push-and-create-pr-using-commit-commandscommit-push-pr" title="Permanent link">&para;</a></h3>
<p><strong>Context:</strong> Worktree (after code review passed and all issues fixed)</p>
<p><strong>Skill:</strong> <code>commit-commands:commit-push-pr</code></p>
<p><strong>Invocation (simplified):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>/commit-commands:commit-push-pr
</code></pre></div></p>
<p><strong>What Happens:</strong>
- Reviews git status and staged/unstaged changes
- Creates a commit with appropriate message (or amends if per-task commits exist)
- Pushes branch to origin
- Creates GitHub PR automatically
- All in one command!</p>
<p><strong>The skill automatically:</strong>
1. Analyzes current git state (per-task commits from Step 4, or uncommitted changes)
2. Creates/amends commit with appropriate message (references behavioral contracts)
3. Pushes branch to origin with <code>-u</code> flag
4. Creates PR using <code>gh pr create</code> with title and description</p>
<p><strong>Commit message includes:</strong>
- PR title from source document or work item
- Multi-line description of changes
- List of implemented behavioral contracts (BC-1, BC-2, etc.)
- Co-authored-by line</p>
<p><strong>PR description includes:</strong>
- Summary from source document
- GitHub closing keywords from the plan's <code>Closes:</code> field (e.g., <code>Fixes #183, fixes #189</code>) — these auto-close issues on merge
- Behavioral contracts (GIVEN/WHEN/THEN)
- Testing verification
- Checklist of completed items</p>
<p><strong>Output:</strong>
- Commit(s) pushed to GitHub (per-task commits from Step 4 + plan file)
- PR URL (e.g., <code>https://github.com/user/repo/pull/123</code>)</p>
<p><strong>Note:</strong> If you prefer a single squashed commit, manually squash before Step 5:
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>git<span class="w"> </span>reset<span class="w"> </span>--soft<span class="w"> </span>HEAD~N<span class="w">  </span><span class="c1"># N = number of task commits</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;PR&lt;N&gt;: &lt;title&gt;&quot;</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>/commit-commands:commit-push-pr
</code></pre></div></p>
<hr />
<h2 id="workflow-variants">Workflow Variants<a class="headerlink" href="#workflow-variants" title="Permanent link">&para;</a></h2>
<h3 id="option-a-subagent-driven-development-in-session">Option A: Subagent-Driven Development (In-Session)<a class="headerlink" href="#option-a-subagent-driven-development-in-session" title="Permanent link">&para;</a></h3>
<p><strong>Alternative to Step 4</strong> - Use for simpler PRs where you want tighter iteration:</p>
<p><strong>Skill:</strong> <code>superpowers:subagent-driven-development</code></p>
<p><strong>Invocation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>Use the subagent-driven-development skill to implement docs/plans/pr&lt;N&gt;-&lt;feature-name&gt;-plan.md.
</code></pre></div></p>
<p><strong>Differences:</strong>
- Executes in current session (no separate session needed)
- Fresh subagent per task (better context isolation)
- Immediate code review after each task
- Faster iteration for small changes</p>
<p><strong>Trade-offs:</strong>
- ✅ Faster for simple PRs (no session switching)
- ✅ Better for iterative refinement
- ⚠️ Uses current session's context (can grow large)
- ⚠️ Review after every task (vs continuous execution in executing-plans)</p>
<hr />
<h3 id="pr-size-tiers">PR Size Tiers<a class="headerlink" href="#pr-size-tiers" title="Permanent link">&para;</a></h3>
<p>Not all PRs need the same level of review. Use these objective criteria to select the appropriate tier:</p>
<table>
<thead>
<tr>
<th>Tier</th>
<th>Criteria</th>
<th>Plan Review (Step 2.5)</th>
<th>Code Review (Step 4.5)</th>
<th>Self-Audit (Step 4.75)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Small</strong></td>
<td>Docs-only with no process/workflow semantic changes (typo fixes, formatting, comment updates, link fixes), OR ≤3 files changed AND only mechanical changes (renames, formatting) AND no behavioral logic changes AND no new interfaces/types AND no new CLI flags</td>
<td>Skip convergence review; single <code>review-pr</code> pre-pass sufficient</td>
<td>Skip convergence review; single <code>review-pr</code> pre-pass sufficient</td>
<td>Full (all 10 dimensions)</td>
</tr>
<tr>
<td><strong>Medium</strong></td>
<td>4-10 files changed, OR new policy template behind existing interface</td>
<td>Full two-stage (pre-pass + convergence)</td>
<td>Full two-stage (pre-pass + convergence)</td>
<td>Full (all 10 dimensions)</td>
</tr>
<tr>
<td><strong>Large</strong></td>
<td>&gt;10 files, OR new interfaces/modules, OR architecture changes</td>
<td>Full two-stage (pre-pass + convergence)</td>
<td>Full two-stage (pre-pass + convergence)</td>
<td>Full (all 10 dimensions)</td>
</tr>
</tbody>
</table>
<p><strong>Rules:</strong>
- <strong>Steps 1, 2, 3, 4, 5 are always required</strong> — worktree, plan, human review, execution, and commit apply to all tiers.
- <strong>Self-audit is always full</strong> — the 10-dimension critical thinking check catches substance bugs that no automated review can. It costs 5 minutes and has caught 3+ real bugs in every PR where it was applied.
- <strong>When in doubt, tier up</strong> — if you're unsure whether a change is Small or Medium, use Medium. The cost of an extra convergence round is 10-15 minutes; the cost of a missed design bug is hours of rework.
- <strong>Human reviewer can override</strong> — if the human reviewer at Step 3 believes the tier is wrong, they can request a different tier.</p>
<p><strong>Examples:</strong>
- Fix a typo in README.md → <strong>Small</strong> (1 file, docs-only)
- Add R18-R20 to micro-plan checklist → <strong>Small</strong> (1 file, docs-only, no behavior change)
- Add a new routing policy → <strong>Medium</strong> (new policy template, ~3 files)
- Extract KV cache to sub-package → <strong>Large</strong> (&gt;10 files, architecture change)</p>
<hr />
<h2 id="skill-reference-quick-guide">Skill Reference Quick Guide<a class="headerlink" href="#skill-reference-quick-guide" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Skill</th>
<th>When to Use</th>
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>commit-commands:clean_gone</code></td>
<td><strong>Step 1</strong> - Pre-cleanup of stale branches</td>
<td>None</td>
<td>Removed stale branches</td>
</tr>
<tr>
<td><code>using-git-worktrees</code></td>
<td><strong>Step 1</strong> - Create isolated workspace FIRST</td>
<td>Branch name</td>
<td>Worktree directory path</td>
</tr>
<tr>
<td><code>writing-plans</code></td>
<td><strong>Step 2</strong> - Create implementation plan from source document</td>
<td>Source document (macro plan/design doc/issues) + <code>docs/templates/micro-plan.md</code></td>
<td>Plan file with contracts + tasks</td>
</tr>
<tr>
<td><code>pr-review-toolkit:review-pr</code></td>
<td><strong>Step 2.5/4.5</strong> - Holistic cross-cutting pre-pass</td>
<td>Plan file or current diff</td>
<td>Issues list with severity</td>
</tr>
<tr>
<td><code>convergence-review</code></td>
<td><strong>Step 2.5</strong> - Dispatch 10 parallel perspectives + enforce convergence</td>
<td>Gate type + plan file path</td>
<td>Converged/not-converged with findings</td>
</tr>
<tr>
<td><code>executing-plans</code></td>
<td><strong>Step 4</strong> - Execute plan tasks continuously</td>
<td>Plan file path</td>
<td>Implemented code + commits</td>
</tr>
<tr>
<td><code>systematic-debugging</code></td>
<td><strong>Step 4 (on failure)</strong> - Structured root-cause analysis</td>
<td>Failing test/error context</td>
<td>Root cause + fix</td>
</tr>
<tr>
<td><code>subagent-driven-development</code></td>
<td><strong>Step 4 (alt)</strong> - Execute plan in-session</td>
<td>Plan file path</td>
<td>Implemented code + commits</td>
</tr>
<tr>
<td><code>convergence-review</code></td>
<td><strong>Step 4.5</strong> - Dispatch 10 parallel perspectives + enforce convergence</td>
<td>Gate type</td>
<td>Converged/not-converged with findings</td>
</tr>
<tr>
<td><code>verification-before-completion</code></td>
<td><strong>Step 4.5 (gate)</strong> - Enforced build/test/lint verification</td>
<td>None</td>
<td>Evidence-based pass/fail</td>
</tr>
<tr>
<td><code>commit-commands:commit-push-pr</code></td>
<td><strong>Step 5</strong> - Commit, push, create PR (all in one)</td>
<td>Current branch state</td>
<td>Commit + push + PR URL</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="example-a-macro-plan-pr-workflow-same-session-with-worktrees">Example A: Macro Plan PR Workflow (Same-Session with <code>.worktrees/</code>)<a class="headerlink" href="#example-a-macro-plan-pr-workflow-same-session-with-worktrees" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>Note:</strong> Examples below use file paths from completed PRs (PR6, PR8, hardening). Referenced plan files have been archived or removed. Adapt the pattern using current plans from <code>docs/plans/</code>.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1"># Step 1: Clean up stale branches, then create worktree</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>/commit-commands:clean_gone
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>/superpowers:using-git-worktrees<span class="w"> </span>pr8-routing-state-and-policy-bundle
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="c1"># Output: Worktree ready at .worktrees/pr8-routing-state-and-policy-bundle/</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="c1"># (continue directly — no new session needed)</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="c1"># Step 2: Create plan (source = macro plan section)</span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a>/superpowers:writing-plans<span class="w"> </span><span class="k">for</span><span class="w"> </span>PR8<span class="w"> </span><span class="k">in</span><span class="w"> </span>@docs/plans/pr8-routing-state-and-policy-bundle-plan.md<span class="w"> </span>using<span class="w"> </span>@docs/templates/micro-plan.md<span class="w"> </span>and<span class="w"> </span>@docs/plans/2026-02-11-macro-implementation-plan-v2.md
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="c1"># Output: Plan created at docs/plans/pr8-routing-state-and-policy-bundle-plan.md</span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="c1"># Step 2.5: Plan review (two-stage)</span>
<a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="c1"># Stage 1: Holistic pre-pass</span>
<a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a>/pr-review-toolkit:review-pr
<a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="c1"># Fix any issues found, then:</span>
<a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="c1"># Stage 2: Formal convergence</span>
<a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a>/convergence-review<span class="w"> </span>pr-plan<span class="w"> </span>docs/plans/pr8-routing-state-and-policy-bundle-plan.md
<a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a>
<a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="c1"># Step 3: Human review plan</span>
<a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="c1"># [Read plan, verify contracts and tasks, approve to proceed]</span>
<a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a>
<a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="c1"># Step 4: Execute implementation</span>
<a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a>/superpowers:executing-plans<span class="w"> </span>@docs/plans/pr8-routing-state-and-policy-bundle-plan.md
<a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a>
<a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="c1"># Output: Tasks execute continuously → done (stops on failure)</span>
<a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a>
<a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="c1"># Step 4.5: Code review (two-stage)</span>
<a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="c1"># Stage 1: Holistic pre-pass</span>
<a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a>/pr-review-toolkit:review-pr
<a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="c1"># Fix any issues found, then:</span>
<a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="c1"># Stage 2: Formal convergence</span>
<a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a>/convergence-review<span class="w"> </span>pr-code
<a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="c1"># Enforced verification gate</span>
<a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a>/superpowers:verification-before-completion
<a id="__codelineno-41-36" name="__codelineno-41-36" href="#__codelineno-41-36"></a>
<a id="__codelineno-41-37" name="__codelineno-41-37" href="#__codelineno-41-37"></a><span class="c1"># Step 4.75: Self-audit (no agent — deliberate critical thinking)</span>
<a id="__codelineno-41-38" name="__codelineno-41-38" href="#__codelineno-41-38"></a><span class="c1"># Think through: logic bugs, design bugs, determinism, consistency, docs, edge cases</span>
<a id="__codelineno-41-39" name="__codelineno-41-39" href="#__codelineno-41-39"></a><span class="c1"># [Fix any issues found, re-verify]</span>
<a id="__codelineno-41-40" name="__codelineno-41-40" href="#__codelineno-41-40"></a>
<a id="__codelineno-41-41" name="__codelineno-41-41" href="#__codelineno-41-41"></a><span class="c1"># Step 5: Commit plan + implementation, push, and create PR (all in one!)</span>
<a id="__codelineno-41-42" name="__codelineno-41-42" href="#__codelineno-41-42"></a>/commit-commands:commit-push-pr
<a id="__codelineno-41-43" name="__codelineno-41-43" href="#__codelineno-41-43"></a>
<a id="__codelineno-41-44" name="__codelineno-41-44" href="#__codelineno-41-44"></a><span class="c1"># Output:</span>
<a id="__codelineno-41-45" name="__codelineno-41-45" href="#__codelineno-41-45"></a><span class="c1"># - Single commit created (plan + implementation)</span>
<a id="__codelineno-41-46" name="__codelineno-41-46" href="#__codelineno-41-46"></a><span class="c1"># - Branch pushed to origin</span>
<a id="__codelineno-41-47" name="__codelineno-41-47" href="#__codelineno-41-47"></a><span class="c1"># - PR created on GitHub</span>
<a id="__codelineno-41-48" name="__codelineno-41-48" href="#__codelineno-41-48"></a><span class="c1"># - PR URL returned</span>
</code></pre></div>
<p><strong>Key benefit:</strong> No copy-pasting! Just use @ file references and let Claude extract the context. No session switching needed with project-local <code>.worktrees/</code>.</p>
<hr />
<h2 id="example-b-issuedesign-doc-pr-workflow">Example B: Issue/Design-Doc PR Workflow<a class="headerlink" href="#example-b-issuedesign-doc-pr-workflow" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1"># Step 1: Create worktree for hardening work (source = design doc + issues)</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>/commit-commands:clean_gone
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>/superpowers:using-git-worktrees<span class="w"> </span>hardening-antipatterns
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="c1"># Step 2: Create plan (source = design document, not macro plan)</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>/superpowers:writing-plans<span class="w"> </span><span class="k">for</span><span class="w"> </span>hardening<span class="w"> </span>PR<span class="w"> </span><span class="k">in</span><span class="w"> </span>@docs/plans/hardening-plan.md<span class="w"> </span>using<span class="w"> </span>@docs/templates/micro-plan.md<span class="w"> </span>and<span class="w"> </span>@docs/plans/2026-02-18-hardening-antipattern-refactoring-design.md
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="c1"># Step 2.5: Plan review (two-stage, same as Example A)</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>/pr-review-toolkit:review-pr
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>/convergence-review<span class="w"> </span>pr-plan<span class="w"> </span>docs/plans/hardening-plan.md
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="c1"># Steps 3-5: Identical to Example A</span>
</code></pre></div>
<p><strong>The workflow is the same regardless of source.</strong> The only difference is what you pass as <code>@&lt;source-document&gt;</code> in Step 2. The template, review passes, execution, and quality gates are identical.</p>
<hr />
<h2 id="tips-for-success">Tips for Success<a class="headerlink" href="#tips-for-success" title="Permanent link">&para;</a></h2>
<ol>
<li><strong>Use automated reviews proactively</strong> - Run <code>review-pr</code> after plan creation and after implementation (don't wait for human review to catch issues)</li>
<li><strong>Fix critical issues immediately</strong> - Don't proceed with known critical issues (they compound)</li>
<li><strong>Re-run targeted reviews after fixes</strong> - Verify fixes worked: <code>/pr-review-toolkit:review-pr code tests</code></li>
<li><strong>Use worktrees for complex PRs</strong> - Avoid disrupting main workspace</li>
<li><strong>Review after execution</strong> - Use automated code review (Step 4.5) after all tasks complete</li>
<li><strong>Reference contracts in commits</strong> - Makes review easier and more traceable</li>
<li><strong>Update CLAUDE.md immediately</strong> - Don't defer documentation</li>
<li><strong>Keep source documents updated</strong> - Mark PRs as completed in macro plan; close resolved issues</li>
<li><strong>Don't trust automated passes alone</strong> - The self-audit (Step 4.75) catches substance bugs that pattern-matching agents miss. In PR9, 3 real bugs were found by critical thinking after 4 automated passes found 0 issues.</li>
<li><strong>Checkpoint long sessions</strong> - For PRs with 8+ tasks or multi-round reviews, write a checkpoint summary to <code>.claude/checkpoint.md</code> after each major phase (planning, implementation, review). If you hit context limits or need to continue in a new session, read the checkpoint first. This prevents losing progress and avoids re-reading the entire conversation history.</li>
</ol>
<h3 id="headless-mode-for-reviews-context-overflow-workaround">Headless Mode for Reviews (Context Overflow Workaround)<a class="headerlink" href="#headless-mode-for-reviews-context-overflow-workaround" title="Permanent link">&para;</a></h3>
<p>If multi-agent review passes hit "Prompt is too long" errors during consolidation (a recurring friction point), switch to headless mode: run each review agent as an isolated invocation that writes findings to a file, then consolidate in a lightweight final pass.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="c1"># headless-review.sh — Run review agents with full context each</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="nv">BRANCH</span><span class="o">=</span><span class="k">$(</span>git<span class="w"> </span>branch<span class="w"> </span>--show-current<span class="k">)</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="nv">PLAN</span><span class="o">=</span><span class="s2">&quot;docs/plans/pr&lt;N&gt;-&lt;name&gt;-plan.md&quot;</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>.review
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="c1"># Run each pass in its own context (no overflow)</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>claude<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Pass 1: Code quality review of branch </span><span class="nv">$BRANCH</span><span class="s2">. Read all changed Go files. Write findings to .review/01-code-quality.md&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">  </span>--allowedTools<span class="w"> </span><span class="s2">&quot;Read,Grep,Glob,Bash&quot;</span><span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>claude<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Pass 2: Test behavioral quality review. Rate each new test. Write findings to .review/02-test-quality.md&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">  </span>--allowedTools<span class="w"> </span><span class="s2">&quot;Read,Grep,Glob,Bash&quot;</span><span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a>claude<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Pass 3: Getting-started review. Simulate user + contributor journeys. Write findings to .review/03-getting-started.md&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">  </span>--allowedTools<span class="w"> </span><span class="s2">&quot;Read,Grep,Glob,Bash&quot;</span><span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="nb">wait</span>
<a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a>
<a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="c1"># Lightweight consolidation (reads only the small finding files)</span>
<a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a>claude<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Read .review/*.md files. Produce a consolidated summary sorted by severity.&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="w">  </span>--allowedTools<span class="w"> </span><span class="s2">&quot;Read,Glob&quot;</span>
</code></pre></div>
<p><strong>When to use:</strong> When Step 2.5 or Step 4.5 hits context limits. Not needed for most PRs — only when the conversation history is already long.</p>
<h3 id="review-strategy-tips">Review Strategy Tips<a class="headerlink" href="#review-strategy-tips" title="Permanent link">&para;</a></h3>
<p><strong>Always use focused prompts, not generic invocations.</strong> Each perspective catches different issues:</p>
<table>
<thead>
<tr>
<th>Perspective</th>
<th>What It Catches That Others Miss</th>
</tr>
</thead>
<tbody>
<tr>
<td>Substance &amp; design</td>
<td>Design bugs, mathematical errors, logical flaws (substance, not structure)</td>
</tr>
<tr>
<td>Cross-doc consistency</td>
<td>Stale source document references, scope mismatch, wrong file paths</td>
</tr>
<tr>
<td>Architecture boundary</td>
<td>Import cycles, boundary violations, wrong abstraction level</td>
</tr>
<tr>
<td>Codebase readiness</td>
<td>Stale comments, pre-existing bugs, missing dependencies</td>
</tr>
<tr>
<td>Structural validation</td>
<td>Broken task dependencies, missing sections, vague steps, unclear summaries</td>
</tr>
<tr>
<td>Code quality</td>
<td>Logic errors, silent failures, convention violations</td>
</tr>
<tr>
<td>Test behavioral quality</td>
<td>Structural tests, type assertions, formula-coupled assertions</td>
</tr>
<tr>
<td>Getting-started experience</td>
<td>Missing examples, undocumented output, contributor friction</td>
</tr>
<tr>
<td>Automated reviewer sim</td>
<td>Mutable globals, user-controlled panics, YAML typo acceptance</td>
</tr>
</tbody>
</table>
<p><strong>Run all perspectives in parallel as a round.</strong> Collect all findings, then fix. Do NOT fix between individual perspectives — that breaks parallelism and makes it impossible to tell whether the round converged.</p>
<p><strong>Convergence = clean round.</strong> A round converges when ALL perspectives report 0 CRITICAL and 0 IMPORTANT findings. If any perspective found issues, the round did not converge — fix all issues and re-run the entire round. The re-run determines convergence, not the initial round with fixes applied.</p>
<hr />
<h2 id="common-issues-and-solutions">Common Issues and Solutions<a class="headerlink" href="#common-issues-and-solutions" title="Permanent link">&para;</a></h2>
<h3 id="issue-plan-too-generic-agents-ask-clarifying-questions">Issue: Plan too generic, agents ask clarifying questions<a class="headerlink" href="#issue-plan-too-generic-agents-ask-clarifying-questions" title="Permanent link">&para;</a></h3>
<p><strong>Solution:</strong> The simplified invocation with @ references handles this automatically:
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>/superpowers:writing-plans<span class="w"> </span><span class="k">for</span><span class="w"> </span>PR6<span class="w"> </span><span class="k">in</span><span class="w"> </span>@docs/plans/pr6-plan.md<span class="w"> </span>using<span class="w"> </span>@docs/templates/micro-plan.md<span class="w"> </span>and<span class="w"> </span>@docs/plans/2026-02-11-macro-implementation-plan-v2.md
</code></pre></div></p>
<p>Claude reads the full macro plan and extracts PR6 context (architecture, dependencies, etc.) automatically.</p>
<p><strong>If still too generic:</strong> Add specific guidance in the invocation:
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>/superpowers:writing-plans<span class="w"> </span><span class="k">for</span><span class="w"> </span>PR6<span class="w"> </span><span class="k">in</span><span class="w"> </span>@docs/plans/pr6-plan.md<span class="w"> </span>using<span class="w"> </span>@docs/templates/micro-plan.md<span class="w"> </span>and<span class="w"> </span>@docs/plans/2026-02-11-macro-implementation-plan-v2.md
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>Pay<span class="w"> </span>special<span class="w"> </span>attention<span class="w"> </span>to:
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>-<span class="w"> </span>Integration<span class="w"> </span>with<span class="w"> </span>existing<span class="w"> </span>SnapshotProvider<span class="w"> </span><span class="o">(</span>see<span class="w"> </span>sim/cluster/snapshot.go<span class="o">)</span>
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>-<span class="w"> </span>Round-robin<span class="w"> </span>as<span class="w"> </span>default<span class="w"> </span>routing<span class="w"> </span>policy
</code></pre></div></p>
<h3 id="issue-tasks-miss-behavioral-contracts-during-execution">Issue: Tasks miss behavioral contracts during execution<a class="headerlink" href="#issue-tasks-miss-behavioral-contracts-during-execution" title="Permanent link">&para;</a></h3>
<p><strong>Solution:</strong> After execution completes, verify all contracts are tested:
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>&quot;Confirm all contracts are tested:
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>- BC-1: Show test results
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>- BC-2: Show test results&quot;
</code></pre></div></p>
<h3 id="issue-lint-fails-at-the-end-with-many-issues">Issue: Lint fails at the end with many issues<a class="headerlink" href="#issue-lint-fails-at-the-end-with-many-issues" title="Permanent link">&para;</a></h3>
<p><strong>Solution:</strong> Ensure task Step 5 (lint check) runs in each task:
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>Each task Step 5 must run:
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>golangci-lint run ./path/to/modified/package/...
</code></pre></div></p>
<h3 id="issue-dead-code-introduced-unused-functions-fields">Issue: Dead code introduced (unused functions, fields)<a class="headerlink" href="#issue-dead-code-introduced-unused-functions-fields" title="Permanent link">&para;</a></h3>
<p><strong>Solution:</strong> In Step 3 plan review, check:
- Every struct field used by end of task or later task?
- Every method called by tests or production code?
- Every parameter actually needed?</p>
<p><strong>Better Solution:</strong> Run <code>review-pr</code> at Step 2.5 to catch dead code in plan:
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>/pr-review-toolkit:review-pr code
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a># code-reviewer agent catches unused abstractions in task code examples
</code></pre></div></p>
<h3 id="issue-review-finds-many-critical-issues-overwhelming-to-fix">Issue: Review finds many critical issues, overwhelming to fix<a class="headerlink" href="#issue-review-finds-many-critical-issues-overwhelming-to-fix" title="Permanent link">&para;</a></h3>
<p><strong>Solution:</strong> Fix issues in priority order:
1. <strong>First pass</strong>: Fix all critical issues, re-run review
2. <strong>Second pass</strong>: Fix important issues, re-run review
3. <strong>Third pass</strong>: Consider suggestions
4. <strong>Use targeted review</strong>: After fixes, only re-run affected aspects
   <div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a># Example: After fixing error handling
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>/pr-review-toolkit:review-pr errors
</code></pre></div></p>
<h3 id="issue-uncertain-if-review-findings-are-valid">Issue: Uncertain if review findings are valid<a class="headerlink" href="#issue-uncertain-if-review-findings-are-valid" title="Permanent link">&para;</a></h3>
<p><strong>Solution:</strong> Review agents provide file:line references:
1. Check the specific code location mentioned
2. Understand the context (sometimes agents miss context)
3. If uncertain, ask Claude to explain the finding
4. If agent is wrong, document why and proceed
5. Consider adding a comment in code explaining why the pattern is intentional</p>
<hr />
<h2 id="appendix-workflow-evolution">Appendix: Workflow Evolution<a class="headerlink" href="#appendix-workflow-evolution" title="Permanent link">&para;</a></h2>
<p><strong>v1.0 (pre-2026-02-14):</strong> Manual agent team prompts, separate design/execution plans
<strong>v2.0 (2026-02-14):</strong> Unified planning with <code>writing-plans</code> skill, batch execution with <code>executing-plans</code> skill, automated two-stage review with <code>pr-review-toolkit:review-pr</code>, simplified invocations with @ file references
<strong>v2.1 (2026-02-16):</strong> Same-session worktree workflow (project-local <code>.worktrees/</code> no longer requires new session); continuous execution replaces batch checkpoints (tasks run without pausing, stop only on failure)
<strong>v2.2 (2026-02-16):</strong> Focused review passes replace generic review-pr invocations. Step 2.5 expanded to 3 passes (cross-doc consistency, architecture boundary, codebase readiness). Step 4.5 expanded to 4 passes (code quality, test behavioral quality, getting-started experience, automated reviewer simulation). Based on PR8 experience where each focused pass caught issues the others missed.
<strong>v2.3 (2026-02-16):</strong> Step 2.5 expanded to 4 passes — added Pass 4 (structural validation: task dependencies, template completeness, executive summary clarity, under-specified task detection). Based on PR9 experience where deferred items fell through cracks in the macro plan, and an under-specified documentation task would have confused the executing agent.
<strong>v2.4 (2026-02-16):</strong> Four targeted skill integrations addressing real failure modes: (1) <code>review-plan</code> as Pass 0 in Step 2.5 — external LLM review catches design bugs that self-review misses (PR9: fitness normalization bug passed 3 focused passes). (2) <code>superpowers:systematic-debugging</code> as on-failure handler in Step 4 — structured root-cause analysis instead of ad-hoc debugging. (3) <code>superpowers:verification-before-completion</code> replaces manual verification prose after Step 4.5 — makes build/test/lint gate non-skippable. (4) <code>commit-commands:clean_gone</code> as pre-cleanup in Step 1 — prevents stale branch accumulation.
<strong>v2.5 (2026-02-16):</strong> Three additions from <code>/insights</code> analysis of 212 sessions: (1) Step 4.75 (pre-commit self-audit) — deliberate critical thinking step with no agent, checking logic/design/determinism/consistency/docs/edge-cases. In PR9, this step found 3 real bugs (wrong reference scale, non-deterministic output, inconsistent comments) that 4 automated passes missed. (2) Headless mode documentation for review passes — workaround for context overflow during multi-agent consolidation, the #1 recurring friction point across 212 sessions. (3) Checkpointing tip for long sessions — prevents progress loss when hitting context limits mid-PR.
<strong>v2.6 (2026-02-18):</strong> Two additions: (1) "Filing Pre-Existing Issues" subsection to Step 4.5 — file a GitHub issue immediately for pre-existing bugs found during review, do not fix in-PR. Based on #38 experience where #183 was discovered. (2) Antipattern prevention from hardening audit of 20+ issues — Step 4.75 expanded to 9 self-audit dimensions (added test epistemology, construction site uniqueness, error path completeness); Step 4.5 Pass 1 prompt expanded with 4 antipattern checks; Step 2.5 Pass 2 prompt expanded with 3 modularity checks. Companion change: <code>prmicroplanprompt-v2.md</code> updated with construction site audit (Phase 0), extension friction assessment (Phase 2), invariant test requirement (Phase 6), and 6 new sanity checklist items (Phase 8).
<strong>v2.7 (2026-02-18):</strong> Generalized workflow from "macro plan only" to any source document (macro plan sections, design docs, GitHub issues, feature requests). Updated template references, review prompts, examples, and invocation patterns. Added Example B showing issue/design-doc workflow alongside macro plan workflow. The same rigor (behavioral contracts, TDD tasks, 5+4 review passes, self-audit) applies regardless of work source.
<strong>v2.8 (2026-02-18):</strong> Auto-close issues on PR merge. Added <code>**Closes:**</code> field to micro plan header template (<code>prmicroplanprompt-v2.md</code>) that captures GitHub closing keywords (e.g., <code>Fixes #183, fixes #189</code>). Updated Step 5 PR description spec to propagate closing keywords into the PR body. GitHub auto-closes referenced issues when the PR merges — no manual cleanup needed.
<strong>v2.9 (2026-02-20):</strong> Convergence re-run protocol for both Step 2.5 and Step 4.5. After all review passes complete with fixes, re-run all passes from scratch to verify fixes didn't introduce cross-pass issues. Repeat until convergence (0 CRITICAL, 0 IMPORTANT). Evidence: Wave 1 parallel PR session — Track B's full re-run validated that 3 fixes (including 2 CRITICAL: overwrite-existing-test-file and incomplete zero-value coverage) introduced no regressions across all 5 passes.</p>
<p><strong>v3.0 (2026-02-23):</strong> Three structural changes aligned with the hypothesis process model: (1) <strong>Multi-perspective rounds replace sequential passes.</strong> Step 2.5 and Step 4.5 now run all perspectives in parallel as a single "round" instead of sequentially with fixes between passes. This matches the hypothesis process's 3-parallel-reviewer model. (2) <strong>External LLM review (<code>review-plan</code>) removed.</strong> Replaced by an internal "Substance &amp; Design" perspective that checks for mathematical errors, scale mismatches, and logical flaws — the same coverage, without the external API dependency. (3) <strong>Convergence redefined.</strong> A round converges when ALL perspectives report 0 CRITICAL and 0 IMPORTANT findings on first pass. If issues are found, fix and re-run the entire round. Convergence is a property of a clean round, not of iterative fixes within a round.</p>
<p><strong>Key improvements in v2.0:</strong>
- <strong>Simplified invocations:</strong> No copy-pasting! Use @ file references (e.g., <code>@docs/plans/&lt;macro-plan&gt;.md</code>)
- <strong>Single planning stage:</strong> Produces both design contracts and executable tasks
- <strong>Automated plan review:</strong> Catches design issues before implementation (Step 2.5)
- <strong>Automated code review:</strong> Catches implementation issues before PR creation (Step 4.5)
- <strong>Built-in checkpoint reviews:</strong> During execution (Step 4) — <em>replaced by continuous execution in v2.1</em>
- <strong>Reduced manual overhead:</strong> Skills handle context extraction automatically</p>
<p><strong>Example workflow brevity:</strong>
- <strong>v1.0:</strong> ~200 words of manual prompts per PR
- <strong>v2.0:</strong> 5 simple commands with @ references</p>
<hr />
<p><strong>For questions or workflow improvements, discuss with Claude using this document as context.</strong></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.expand", "navigation.top", "search.highlight", "search.suggest", "content.code.copy", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>